---
title: "Write an R package from scratch to CRAN"
author: kearneymw
date: '2019-05-01'
categories:
  - rstats
tags:
  - R
---



<p>On the topic of <em>how to write an R package</em>, there are already several well-established tools (e.g., the <a href="https://devtools.r-lib.org/">{devtools}</a> and <a href="https://usethis.r-lib.org/">{usethis}</a> packages) and comprehensive guides (e.g., <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions by R Core Team</a> and <a href="http://r-pkgs.had.co.nz/">R packages by Hadley Wickham</a>). But <strong>the biggest obstacle to writing one’s first R package isn’t the availability of tools or comprehensive guides on the subject. It’s the perceived difficulty of it</strong>. Fortunately, there are several demystifying blog posts on the subject!</p>
<p>One of the first (and probably most famous) posts is by <a href="https://twitter.com/hspter">Hilary Parker</a>, who was nice enough to not only provide a timeless guide to writing an R package but also to identify, number, and title the exact steps in the process:</p>
<blockquote>
<h3 id="writing-an-r-package-from-scratch-by-hilary-parker"><a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">Writing an R package from Scratch</a> by <a href="https://twitter.com/hspter">Hilary Parker</a></h3>
<ul>
<li><strong>Step 0</strong>: Packages you will need <code>c("devtools", "roxygen")</code></li>
<li><strong>Step 1</strong>: Create your package directory <code>create("cats")</code></li>
<li><strong>Step 2</strong>: Add functions <code>cat_fun &lt;- function(...)</code></li>
<li><strong>Step 3</strong>: Add documentation <code>#' @param</code></li>
<li><strong>Step 4</strong>: Process your documentation <code>devtools::document()</code></li>
<li><strong>Step 5</strong>: Install! <code>devtools::install()</code></li>
</ul>
</blockquote>
<p>These steps still hold up today, but like most things related to software development, they don’t incorporate the newest and best tools. For that, you can turn a post by <a href="https://twitter.com/tomwestlake121">Tomas Westlake</a>, who provided an updated take on Hilary’s initial post, and, thankfully, also followed the aforementioned step-centric format:</p>
<blockquote>
<h3 id="writing-an-r-package-from-scratch-by-tomas-westlake"><a href="https://r-mageddon.netlify.com/post/writing-an-r-package-from-scratch/">Writing an R package from Scratch</a> by <a href="https://twitter.com/tomwestlake121">Tomas Westlake</a></h3>
<ul>
<li><strong>Step 0</strong>: Packages we need <code>c("devtools", "roxygen2", "usethis")</code></li>
<li><strong>Step 1</strong>: Creating the package <code>usethis::create_package()</code></li>
<li><strong>Step 2</strong>: Adding functions <code>usethis::use_r()</code></li>
<li><strong>Step 3</strong>: Adding function documentation <code>devtools::document()</code> and <code>devtools::install()</code></li>
<li><strong>Step 4</strong>: Editing your Description <code>use_cc0_license("First Last")</code></li>
<li><strong>Step 5</strong>: Add package documentation <code>usethis::use_package_doc()</code></li>
<li><strong>Step 6</strong>: Adding a Git repo <code>usethis::use_git()</code></li>
<li><strong>Step 7</strong>: Uploading to GitHub <code>usethis::use_github()</code></li>
<li><strong>Step 8</strong>: Adding a Readme <code>usethis::use_readme_rmd()</code></li>
<li><strong>Step 9</strong>: Adding a logo <code>usethis::use_logo()</code></li>
</ul>
</blockquote>
<p>In addition to these <em>step-by-step</em>/<em>how-to</em> posts on writing an R package, there is also a fantastic post by <a href="https://twitter.com/hvitfeldt">Emil Hvitfedt</a> on the additional tasks associated with testing, documenting, and maintaining packages:</p>
<blockquote>
<h3 id="usethis-workflow-for-package-development-by-emil-hvitfedt"><a href="https://www.hvitfeldt.me/blog/usethis-workflow-for-package-development/">usethis workflow for package development</a> by <a href="https://twitter.com/hvitfeldt">Emil Hvitfedt</a></h3>
<ul>
<li>Before creation <code>available::available()</code></li>
<li>Creating minimal functional package <code>usethis::create_package()</code> <code>usethis::use_git()</code> <code>usethis::use_github()</code></li>
<li>One time modifications <code>usethis::use_mit_license()</code> <code>usethis::use_gpl3_license()</code> <code>usethis::use_apl2_license()</code> <code>usethis::use_cc0_license()</code> <code>usethis::use_readme_rmd()</code> <code>usethis::use_travis()</code> <code>usethis::use_appveyor()</code> <code>usethis::use_coverage(type = c("codecov"))</code> <code>use_testthat()</code> <code>use_spell_check()</code> <code>use_data_raw()</code> <code>use_news_md()</code></li>
<li>Multiple time modifications <code>usr_r()</code> <code>use_test("function_name")</code> <code>use_package("dplyr")</code> <code>use_vignette("How to do this cool analysis")</code></li>
<li>Before every commit (restart, document, check)</li>
<li>Before every release <code>use_version()</code></li>
</ul>
</blockquote>
<p>as well as an excellent bigger-picture post by <a href="https://twitter.com/ma_salmon">Maëlle Salmon</a> about what goes into <em>good</em> <strong>open-science</strong> R packages:</p>
<blockquote>
<h3 id="how-to-develop-good-r-packages-for-open-science-by-maelle-salmon"><a href="https://masalmon.eu/2017/12/11/goodrpackages/">How to develop good R packages (for open science)</a> by <a href="https://twitter.com/ma_salmon">Maëlle Salmon</a></h3>
<ul>
<li>Should your package even exist?</li>
<li>What should your package contain exactly?</li>
<li>What will your package be called?</li>
<li>Where should your package live?</li>
<li>How to check your package automatically</li>
<li>Bring the package to its users and get feedback</li>
</ul>
</blockquote>
<p>As far as going from 0-60 on writing an R package, it’s really tough to improve on these posts.</p>
<div id="mwk" class="section level2">
<h2>mwk</h2>
<div id="step-0-required-packages" class="section level3">
<h3>Step 0: Required packages</h3>
<p>Make sure you have the following packages installed:</p>
<pre class="r"><code>install.packages(c(&quot;devtools&quot;, &quot;roxygen2&quot;, &quot;usethis&quot;, &quot;pkgdown&quot;))</code></pre>
</div>
<div id="step-1-create" class="section level3">
<h3>Step 1: Create</h3>
<p>Create the package/directory</p>
<pre class="r"><code>usethis::create_package()</code></pre>
<p>Make it an R project</p>
<pre class="r"><code>usethis::use_rstudio()</code></pre>
</div>
<div id="step-2-description" class="section level3">
<h3>Step 2: DESCRIPTION</h3>
<p>Add a license</p>
<pre class="r"><code>usethis::use_mit_license()</code></pre>
<p>Add dependencies</p>
<pre class="r"><code>usethis::use_package()
usethis::use_pipe()</code></pre>
</div>
<div id="step-3-functiondata" class="section level3">
<h3>Step 3: Function/data</h3>
<p>Add some functions and/or data</p>
<pre class="r"><code>usethis::use_fun()
usethis::use_data()</code></pre>
<p>Make sure to document them, i.e., <code>#' @param</code></p>
<ul>
<li>Step 4: Documentation <code>usethis::use_package_doc()</code> <code>usethis::use_news_md()</code> <code>usethis::use_readme_rmd()</code> <code>usethis::use_vignette()</code> <code>usethis::use_logo()</code> <code>usethis::use_lifecycle_logo()</code> <code>usethis::use_cran_logo()</code></li>
<li>Step 5: Build <code>devtools::document()</code> <code>devtools::install()</code></li>
<li>Step 6: Tests <code>usethis::use_testthat()</code> <code>usethis::use_test()</code> <code>usethis::use_coverage(type = c("codecov"))</code></li>
<li>Step 7: Continuous-Integration <code>usethis::use_travis()</code> <code>usethis::use_appveyor()</code></li>
<li>Step 8: Website <code>pkgdown::build_site()</code></li>
<li>Step 9: Git/Github <code>usethis::use_git()</code> <code>usethis::use_github()</code></li>
</ul>
</div>
</div>
